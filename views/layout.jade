doctype html
html
    head
        // application css
        link(rel='stylesheet', href='/stylesheets/style.css')
        meta(name='viewport', content='width=device-width, initial-scale=1, height=device-height')
        meta(charset='utf-8')

        script(src='https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js')
        script(src='main.js', type='text/javascript')
        script(src='http://code.jquery.com/ui/1.11.4/jquery-ui.js')

    body.unselectable

        // Trigger/Open The Modal
        div(style='width: 100%; height: 3.5em;')
            div(style='float: right; padding: 10px 10px 10px 10px;')
                button#connectBtn Connect
            .show-large(style='float: right; padding: 10px 10px 10px 10px;')
                button#settingsBtn Settings

        // The Modal
        #connectModal.modal
            // Modal content
            .modal-content.autoModal(style='display: table')
                span#connectClose.close ×
                div
                    form#IPentry(method='post', style='display: block', onsubmit='return false;', autocomplete='on')
                        h4(style='text-align:center; padding-top: 15px') Please enter the IP Address of the robot below
                        input#IP(style='display: inline-block; max-width: 80%;', type='text', placeholder='IP Address', tabindex='1', required='', autofocus='')
                        | &nbsp;
                        | &nbsp;
                        input(style='display: inline-block;', type='submit', onclick='createSession()')

        // The Modal
        #settingsModal.modal
            // Modal content
            .modal-content.autoModal(style='display: table;')
                span#settingsClose.close ×
                div(style='text-align:center; padding-top: 15px')
                    button#createPlaylistBtn(style='display: block', onclick='createPlaylist()') Create Playlist
                    form#playlistForm(style='margin-top: 10px; display: none', onsubmit='return false;', method='post', autocomplete='on')
                        div(style='display: block')
                            input#playlistName(style='margin: auto; margin-bottom: 10px; width: 350px; text-align: center;', type='text', placeholder='Enter a name for your playlist', tabindex='3', autofocus='')
                            | &nbsp;
                            | &nbsp;
                            input#savePlaylistBtn(style='margin: auto; margin-bottom: 10px;', type='submit', value='Save', onclick='savePlaylist()')
                        ul#behaveListAvailable.sortable.connectedSortable
                        ul#behaveListPlaylist.sortable.connectedSortable(name='message')

        form#executionForm(style='margin-top: 10px;', method='post', onsubmit='return false;', autocomplete='on')
            h4(style='text-align:center; padding-top: 15px') Behaviour Execution
            button(style='float: left; width: 49%', onclick='repeatBehaviour()') Repeat
            button(style='float: right; width: 49%', onclick='startBehaviour()') Next
            input#sayText(style='margin-bottom: 10px; margin-top: 5px; max-width: 60%;', type='text', placeholder='Enter text to say', tabindex='3', autofocus='')
            input(style='float: right; margin-bottom: 10px; margin-top: 7px', type='submit', onclick='say()')
            button(style='float: left; width: 49%', onclick='positiveBehaviour()') Positive
            button(style='float: right; width: 49%', onclick='negativeBehaviour()') Negative
            button.red(style='float: centre; width: 100%;', onclick='stopBehaviour()') STOP

        script.
            $(function() {
                $(".sortable").sortable({
                    connectWith: ".connectedSortable"
                }).disableSelection();
            });
            // Get the modal
            var connectModal = document.getElementById('connectModal');
            // Get the button that opens the modal
            var connectBtn = document.getElementById('connectBtn');
            // Get the <span> element that closes the modal
            var connectClose = document.getElementById("connectClose");
            // When the user clicks on the button, open the modal
            connectBtn.onclick = function() {
                connectModal.style.display = "block";
            }
            // When the user clicks on <span> (x), close the modal
            connectClose.onclick = function() {
                connectModal.style.display = "none";
            }
            // When the user clicks anywhere outside of the modal, close it
            window.onclick = function(event) {
                if (event.target == connectModal) {
                    connectModal.style.display = "none";
                }
            }
            // Get the modal
            var settingsModal = document.getElementById('settingsModal');
            // Get the button that opens the modal
            var settingsBtn = document.getElementById('settingsBtn');
            // Get the <span> element that closes the modal
            var settingsClose = document.getElementById('settingsClose');
            // When the user clicks on the button, open the modal
            settingsBtn.onclick = function() {
                settingsModal.style.display = "block";
            }
            // When the user clicks on <span> (x), close the modal
            settingsClose.onclick = function() {
                settingsModal.style.display = "none";
                document.getElementById('behaveListAvailable').style.display = 'none'
                document.getElementById('behaveListPlaylist').style.display = 'none'
                document.getElementById('playlistName').style.display = 'none'
                document.getElementById('savePlaylist').style.display = 'none'
                document.getElementById('createPlaylistBtn').style.display = 'block'
            }
            // When the user clicks anywhere outside of the modal, close it
            window.onclick = function(event) {
                if (event.target == settingsModal) {
                    settingsModal.style.display = "none";
                    document.getElementById('behaveListAvailable').style.display = 'none'
                    document.getElementById('behaveListPlaylist').style.display = 'none'
                    document.getElementById('playlistName').style.display = 'none'
                    document.getElementById('savePlaylist').style.display = 'none'
                    document.getElementById('createPlaylistBtn').style.display = 'block'
                }
            }

        // qimessaging & jquery stuff
        script(src='libs/qimessaging/1.0/qimessaging.js')
        script(src='libs/qimessaging/1.0/socket.io.min.js')
        script(src='scripts/Session.js')
        script(src='scripts/Robot.js')
        script(src='scripts/Playlist.js')
